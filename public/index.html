<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TREND GİYİM - Kalite ve Zarafetin Adresi</title>
    <meta name="description" content="TREND GİYİM - Çorum'da 25 yılı aşkın tecrübe ile Arıccı, Markova gibi dünya markası takım elbise ve smokin satışı.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root{--ana-renk:#252a34;--ikinci-renk:#bfa071;--arkaplan-renk:#ffffff;--yazi-renk:#333;--kart-arkaplan:#fff;--golge-renk:rgba(0,0,0,0.07);--kenarlik-renk:#e9e9e9;--baslik-font:'Playfair Display',serif;--govde-font:'Lato',sans-serif}
        body.koyu-tema{--ana-renk:#121212;--ikinci-renk:#bfa071;--arkaplan-renk:#181818;--yazi-renk:#e0e0e0;--kart-arkaplan:#1e1e1e;--golge-renk:rgba(0,0,0,0.2);--kenarlik-renk:#2c2c2c}
        body{font-family:var(--govde-font);margin:0;padding:0;line-height:1.7;color:var(--yazi-renk);background-color:var(--arkaplan-renk);transition:background-color .3s,color .3s;-webkit-font-smoothing:antialiased}
        html{scroll-behavior:smooth}
        .container{width:90%;max-width:1200px;margin:auto;overflow:hidden;padding:0 20px}
        h1,h2,h3,h4{font-family:var(--baslik-font);letter-spacing:1px}
        header{background-color:rgba(25,25,25,0.8);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);padding:1rem 0;position:fixed;width:100%;top:0;z-index:1000;border-bottom:1px solid rgba(255,255,255,0.1);transition:background-color .3s}
        header .container{display:flex;justify-content:space-between;align-items:center}
        header .logo{margin:0;font-size:1.8em;font-family:var(--baslik-font);color:#fff}
        header nav{display:flex;align-items:center}
        header nav ul{margin:0;padding:0;list-style:none}
        header nav ul li{display:inline;margin-left:25px}
        header a{color:#f0f0f0;text-decoration:none;font-weight:700;font-size:.9em;transition:color .3s}
        header a:hover{color:var(--ikinci-renk)}
        #tema-degistirici{background:0 0;border:none;cursor:pointer;margin-left:25px;padding:5px;color:#f0f0f0;transition:color .3s}
        #tema-degistirici:hover{color:var(--ikinci-renk)}
        #tema-degistirici svg{width:24px;height:24px;fill:currentColor}
        #gunes-ikon{display:none}
        body.koyu-tema #gunes-ikon{display:block}
        body.koyu-tema #ay-ikon{display:none}
        section{padding:120px 0;border-bottom:1px solid var(--kenarlik-renk)}
        section:last-of-type{border-bottom:none}
        section h3{text-align:center;font-size:3em;margin-bottom:70px;position:relative}
        section h3::after{content:'';display:block;width:60px;height:3px;background-color:var(--ikinci-renk);margin:15px auto 0}
        #hero{background-image:url(giris-fotografi.jpg);background-size:cover;background-position:center;color:#fff;text-align:center;padding:220px 0;display:flex;align-items:center;justify-content:center;min-height:100vh;box-sizing:border-box;position:relative}
        #hero::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(to bottom,rgba(0,0,0,.7),rgba(0,0,0,.4));z-index:1}
        #hero .container{position:relative;z-index:2}
        #hero h2{font-size:4.5em;margin-bottom:15px;text-shadow:2px 2px 10px rgba(0,0,0,.5)}
        #hero p{font-size:1.2em;max-width:600px;margin:0 auto 30px}
        .hakkimizda-icerik{display:flex;align-items:center;gap:60px;flex-wrap:wrap}
        .hakkimizda-metin,.hakkimizda-gorsel{flex:1;min-width:300px}
        .hakkimizda-gorsel img{width:100%;border-radius:10px;box-shadow:0 15px 30px var(--golge-renk)}
        .hizmetler-listesi{display:flex;justify-content:space-around;text-align:center;gap:30px;flex-wrap:wrap}
        .hizmet-karti{background:var(--kart-arkaplan);padding:40px 30px;border-radius:8px;box-shadow:0 10px 30px var(--golge-renk);width:100%;max-width:320px;transition:transform .3s,box-shadow .3s;border-bottom:4px solid var(--ikinci-renk)}
        .hizmet-karti:hover{transform:translateY(-10px);box-shadow:0 18px 40px var(--golge-renk)}
        .hizmet-karti h4{font-size:1.6em;margin-top:0}
        .galeri-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px}
        .galeri-item{overflow:hidden;border-radius:8px;box-shadow:0 10px 30px var(--golge-renk)}
        .galeri-item img{width:100%;height:400px;object-fit:cover;transition:transform .4s ease-out}
        .galeri-item:hover img{transform:scale(1.1)}
        .puanlama-ozeti{display:flex;align-items:center;justify-content:center;gap:15px;margin-bottom:30px}
        .puanlama-ozeti .puan{font-size:1.5em;font-weight:700;color:var(--yazi-renk)}
        .yildizlar{position:relative;font-size:2em;color:#ccc}
        .yildizlar-dolu{position:absolute;left:0;top:0;white-space:nowrap;overflow:hidden;color:#f39c12}
        #dinamik-yorum-alani{background:var(--kart-arkaplan);padding:40px;border-radius:8px;box-shadow:0 10px 30px var(--golge-renk);border-top:5px solid var(--ikinci-renk);text-align:center;max-width:800px;margin:auto;transition:opacity .4s ease-in-out}
        #dinamik-yorum-alani.gizli{opacity:0}
        #dinamik-yorum-alani p{font-size:1.2em;font-style:italic;margin-bottom:20px;line-height:1.8;min-height:80px}
        #dinamik-yorum-alani .yorum-sahibi{font-weight:700;font-style:normal;color:var(--ikinci-renk)}
        .cta-button{display:inline-block;background:var(--ikinci-renk);color:#fff;padding:15px 35px;text-decoration:none;border-radius:50px;margin-top:20px;font-weight:700;transition:background-color .3s,transform .3s;font-family:var(--govde-font);border:none;box-shadow:0 4px 15px rgba(0,0,0,.2)}
        .cta-button:hover{background-color:#a5885c;transform:translateY(-3px)}
        #yorum-formu-alani{background-color:var(--arkaplan-renk);padding:60px 0;text-align:center}
        body.koyu-tema #yorum-formu-alani{background-color:#121212}
        #yorum-formu-alani .form-container{max-width:600px;margin:auto}
        .form-girdi{width:100%;padding:15px;margin-bottom:15px;border-radius:5px;border:1px solid var(--kenarlik-renk);background-color:var(--kart-arkaplan);color:var(--yazi-renk);box-sizing:border-box}
        .puanlama-alani{margin-bottom:20px}
        .puanlama-alani .yildiz-secim{display:inline-flex;font-size:2.5em;direction:rtl}
        .puanlama-alani .yildiz-secim .yildiz{cursor:pointer;color:#ccc;transition:color .2s}
        .puanlama-alani .yildiz-secim .yildiz.dolu,.puanlama-alani .yildiz-secim .yildiz.hover{color:#f39c12}
        .iletisim-container{display:flex;gap:40px;flex-wrap:wrap;align-items:flex-start;}
        .iletisim-bilgileri{text-align:left; flex: 1; min-width: 300px;}
        .harita{flex: 1; min-width: 300px;}
        .harita iframe{width:100%;height:400px;border:none;border-radius:10px;box-shadow:0 10px 30px var(--golge-renk);}
        #iletisim ul{list-style:none;padding:0;}
        #iletisim li{background:transparent;padding:10px 0;margin-bottom:10px;border-left:3px solid var(--ikinci-renk);padding-left:15px;border-radius:0;box-shadow:none;}
        #firmalar{background-color:var(--arkaplan-renk)}
        body.koyu-tema #firmalar{background-color:#0d0d0d}
        .firmalar-listesi{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;gap:40px}
        .firma-karti{color:var(--yazi-renk);padding:15px 30px;font-weight:700;font-size:1.4em;opacity:.7;transition:opacity .3s}
        .firma-karti:hover{opacity:1}
        footer{background:var(--ana-renk);color:#a0a0a0;text-align:center;padding:30px 0;transition:background-color .3s;border-top:1px solid var(--kenarlik-renk)}
        
        header .menu-toggle { display: none; flex-direction: column; justify-content: space-around; width: 30px; height: 25px; background: transparent; border: none; cursor: pointer; padding: 0; z-index: 1002; }
        header .menu-toggle .bar { width: 100%; height: 3px; background-color: #fff; border-radius: 10px; transition: all 0.3s ease-in-out; }
        @media (max-width: 768px) {
            header .container { flex-direction: row; justify-content: space-between; align-items: center; }
            header nav { position: fixed; top: 0; right: -100%; width: 70%; max-width: 300px; height: 100vh; background-color: rgba(25, 25, 25, 0.95); backdrop-filter: blur(10px); flex-direction: column; justify-content: center; align-items: center; transition: right 0.3s ease-in-out; padding-top: 0; }
            header nav.active { right: 0; }
            header nav ul { flex-direction: column; padding-top: 0; width: 100%; }
            header nav ul li { display: block; margin: 0; width: 100%; padding: 15px 0; text-align: center; }
            header nav ul li a {font-size: 1.1em;}
            header nav ul li:not(:last-child) { border-bottom: 1px solid rgba(255,255,255,0.1); }
            header .menu-toggle { display: flex; }
            #tema-degistirici { margin: 20px 0 0 0; }
            #hero h2 { font-size: 3em; }
            section { padding: 80px 0; }
            section h3 { font-size: 2.2em; }
        }
        
        #yardimci-buton{position:fixed;bottom:25px;right:25px;background-color:var(--ikinci-renk);color:#fff;width:60px;height:60px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 5px 15px rgba(0,0,0,0.2);z-index:1001;transition:transform .3s}
        #yardimci-buton:hover{transform:scale(1.1)}
        #yardimci-ekrani{position:fixed;bottom:100px;right:25px;width:90%;max-width:350px;height:450px;background-color:var(--kart-arkaplan);border-radius:10px;box-shadow:0 10px 30px var(--golge-renk);z-index:1001;display:flex;flex-direction:column;transition:opacity .3s,transform .3s;transform-origin:bottom right}
        #yardimci-ekrani.gizli{opacity:0;transform:scale(0.9);pointer-events:none}
        .yardimci-baslik{background-color:var(--ana-renk);color:#fff;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;border-top-left-radius:10px;border-top-right-radius:10px}
        .yardimci-baslik h4{margin:0;font-family:var(--govde-font);font-size:1em}
        #yardimci-kapat{background:none;border:none;color:#fff;font-size:2em;cursor:pointer;line-height:1;padding:0;opacity:.8}
        #yardimci-kapat:hover{opacity:1}
        .yardimci-icerik{padding:0 20px;flex-grow:1;display:flex;flex-direction:column;overflow-y:auto}
        #mesajlar{flex-grow:1;padding:10px 0;display:flex;flex-direction:column;gap:10px}
        .mesaj{padding:8px 12px;border-radius:18px;max-width:80%;word-wrap:break-word}
        .mesaj.giden{background-color:var(--ikinci-renk);color:#fff;align-self:flex-end}
        .mesaj.gelen{background-color:#e9e9e9;color:#333;align-self:flex-start}
        body.koyu-tema .mesaj.gelen{background-color:#2c2c2c;color:var(--yazi-renk)}
        #canli-destek-formu{display:flex;padding:15px 0}
        #canli-destek-formu textarea{flex-grow:1;resize:none;border-radius:20px;padding:10px 15px;border:1px solid var(--kenarlik-renk);margin-right:10px;font-family:var(--govde-font);font-size:1em;}
        #canli-destek-formu button{border-radius:50%;width:45px;height:45px;flex-shrink:0;border:none;background-color:var(--ikinci-renk);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition: background-color .3s;}
        #canli-destek-formu button:hover{background-color:#a5885c;}
        .chat-ended-message { text-align: center; color: #888; font-style: italic; padding: 20px; }
        #canli-destek-formu.disabled { pointer-events: none; opacity: 0.5; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo">TREND GİYİM</h1>
            <nav id="main-nav">
                <ul>
                    <li><a href="#hero">Ana Sayfa</a></li>
                    <li><a href="#hakkimizda">Hakkımızda</a></li>
                    <li><a href="#hizmetler">Hizmetler</a></li>
                    <li><a href="#galeri">Galeri</a></li>
                    <li><a href="#iletisim">İletişim</a></li>
                </ul>
                <button id="tema-degistirici" aria-label="Temayı Değiştir">
                    <svg id="gunes-ikon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/></svg>
                    <svg id="ay-ikon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M12 21.5c-5.24 0-9.5-4.26-9.5-9.5S6.76 2.5 12 2.5c.34 0 .68.02 1.01.06C8.2 3.68 5.5 7.05 5.5 11c0 4.13 3.37 7.5 7.5 7.5c3.05 0 5.66-1.84 6.85-4.45c.19.29.35.6.48.92C18.6 18.28 15.53 21.5 12 21.5z"/></svg>
                </button>
            </nav>
            <button class="menu-toggle" id="menu-toggle" aria-label="Menüyü aç/kapat">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </header>

    <main>
        <section id="hero">
            <div class="container">
                <h2>Kalite ve Zarafetin Adresi</h2>
                <p>25 yılı aşkın tecrübemiz ve dünya markası ürünlerimizle şıklığınıza imza atıyoruz.</p>
                <a href="#hakkimizda" class="cta-button">Markamızı Keşfedin</a>
            </div>
        </section>

        <section id="hakkimizda">
            <div class="container">
                <h3>Biz Kimiz?</h3>
                <div class="hakkimizda-icerik">
                    <div class="hakkimizda-metin">
                        <p>TREND GİYİM olarak, 25 yılı aşkın satış tecrübesi ve deneyimiyle hizmetinizdeyiz. Müşteri memnuniyetini her zaman ön planda tutarak, kaliteli ve güvenilir satış güvencesi sunuyoruz. En özel günlerinizde şıklığınızı tamamlayacak en iyi koleksiyonları sizin için bir araya getiriyoruz.</p>
                    </div>
                    <div class="hakkimizda-gorsel">
                        <img src="hakkimizda-fotografi.jpg" loading="lazy" alt="Trend Giyim Mağaza İçi">
                    </div>
                </div>
            </div>
        </section>

        <section id="hizmetler">
            <div class="container">
                <h3>Sunduğumuz Ayrıcalıklar</h3>
                <div class="hizmetler-listesi">
                    <div class="hizmet-karti"><h4>Takım Elbise ve Smokin</h4><p>Dünyaca ünlü markaların en şık ve modern koleksiyonları mağazamızda sizleri bekliyor.</p></div>
                    <div class="hizmet-karti"><h4>Kalite ve Güvence</h4><p>Tüm ürünlerimizde birinci sınıf malzeme ve işçilik garantisi sunarak, tam güvence sağlıyoruz.</p></div>
                    <div class="hizmet-karti"><h4>Kişisel Stil Danışmanlığı</h4><p>25 yılı aşkın deneyimimizle, tarzınıza en uygun seçimi yapmanız için size özel hizmet veriyoruz.</p></div>
                </div>
            </div>
        </section>

        <section id="galeri">
            <div class="container">
                <h3>Yeni Sezon Koleksiyonu</h3>
                <div class="galeri-grid">
                    <div class="galeri-item"><img src="koleksiyon-1.jpg" loading="lazy" alt="Yeni Sezon Ürünü 1"></div>
                    <div class="galeri-item"><img src="koleksiyon-2.jpg" loading="lazy" alt="Yeni Sezon Ürünü 2"></div>
                    <div class="galeri-item"><img src="koleksiyon-3.jpg" loading="lazy" alt="Yeni Sezon Ürünü 3"></div>
                </div>
            </div>
        </section>

        <section id="yorumlar">
            <div class="container">
                <h3>Müşterilerimiz Bizim İçin Ne Dedi?</h3>
                <div class="puanlama-ozeti">
                    <strong class="puan"></strong>
                    <div class="yildizlar">
                        ★★★★★
                        <div class="yildizlar-dolu" style="width: 0%;">★★★★★</div>
                    </div>
                    <span class="yorum-sayisi" id="yorum-sayac">(0 Yorum)</span>
                </div>
                <div id="dinamik-yorum-alani">
                    <p id="yorum-metni">Henüz yorum bulunmuyor. İlk yorumu siz yapın!</p>
                    <div id="yorum-sahibi" class="yorum-sahibi"></div>
                </div>
            </div>
        </section>

        <section id="yorum-formu-alani">
            <div class="container">
                <h3>Yorum Bırakın</h3>
                <div class="form-container">
                    <form id="yorumFormu">
                        <div class="puanlama-alani">
                            <div class="yildiz-secim" id="yildiz-secim-alani">
                                <span class="yildiz" data-puan="5">★</span>
                                <span class="yildiz" data-puan="4">★</span>
                                <span class="yildiz" data-puan="3">★</span>
                                <span class="yildiz" data-puan="2">★</span>
                                <span class="yildiz" data-puan="1">★</span>
                            </div>
                            <input type="hidden" name="puan" id="puan-degeri" required>
                        </div>
                        <input type="text" id="yorumAd" name="ad" class="form-girdi" placeholder="Adınız Soyadınız" required>
                        <textarea id="yorumMesaj" name="mesaj" class="form-girdi" rows="5" placeholder="Yorumunuzu buraya yazın..." required></textarea>
                        <button type="submit" class="cta-button">Yorumu Gönder</button>
                    </form>
                    <p id="form-sonuc" style="margin-top: 20px;"></p>
                </div>
            </div>
        </section>

        <section id="iletisim">
            <div class="container">
                <h3>İletişim</h3>
                <div class="iletisim-container">
                    <div class="iletisim-bilgileri">
                         <ul>
                             <li><strong>Adres:</strong> Gülabibey, Kubbeli Cd. No:15, 19100 Çorum Merkez/Çorum</li>
                             <li><strong>Telefon:</strong> <a href="tel:05432575650">0543 257 56 50</a></li>
                             <li><strong>E-posta:</strong> <a href="mailto:trendcollection@hotmail.com">trendcollection@hotmail.com</a></li>
                         </ul>
                    </div>
                    <div class="harita">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3000.835159045012!2d34.95208331538963!3d40.54583897935017!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4087ee425841136b%3A0x6b454438333f5f6b!2zR8O8bGFiYmV5LCBLdWJiZWxpIENkLiBObzoxNSwgMTkxMDAgw4dvcnVtIE1lcmtlei_Dh29ydW0!5e0!3m2!1str!2str!4v1661202581343!5m2!1str!2str" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="firmalar">
            <div class="container">
                <h3>Çalıştığımız Markalar</h3>
                <div class="firmalar-listesi">
                    <div class="firma-karti">Arıccı</div>
                    <div class="firma-karti">Tommy Life</div>
                    <div class="firma-karti">Markova</div>
                    <div class="firma-karti">Ted David</div>
                    <div class="firma-karti">Apatro</div>
                </div>
            </div>
        </section>
    </main>

    <div id="yardimci-buton">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="32px" height="32px"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/></svg>
    </div>

    <div id="yardimci-ekrani" class="gizli">
        <div class="yardimci-baslik">
            <h4>Canlı Destek</h4>
            <button id="yardimci-kapat">×</button>
        </div>
        <div class="yardimci-icerik">
            <div id="mesajlar">
                 <div class="mesaj gelen">Merhaba! Size nasıl yardımcı olabiliriz?</div>
            </div>
            <form id="canli-destek-formu">
                <textarea placeholder="Mesajınızı yazın..." rows="1"></textarea>
                <button type="submit" aria-label="Gönder">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
            </form>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>© 2025 TREND GİYİM. Tüm Hakları Saklıdır.</p>
        </div>
    </footer>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const temaButonu = document.getElementById("tema-degistirici");
            const body = document.body;
            function temaUygula() {
                const mevcutTema = localStorage.getItem("tema");
                if (mevcutTema === "koyu") body.classList.add("koyu-tema");
                else body.classList.remove("koyu-tema");
            }
            temaUygula();
            temaButonu.addEventListener("click", () => {
                body.classList.toggle("koyu-tema");
                localStorage.setItem("tema", body.classList.contains("koyu-tema") ? "koyu" : "acik");
            });

            const yorumFormu = document.getElementById('yorumFormu');
            const formSonuc = document.getElementById('form-sonuc');
            const puanlamaYildizlari = document.querySelectorAll(".yildiz-secim .yildiz");
            const puanInput = document.getElementById("puan-degeri");

            puanlamaYildizlari.forEach(yildiz => {
                yildiz.addEventListener("click", () => {
                    puanInput.value = yildiz.dataset.puan;
                    let puan = parseInt(puanInput.value);
                    puanlamaYildizlari.forEach(y => {
                        y.classList.toggle("dolu", parseInt(y.dataset.puan) <= puan);
                    });
                });
            });

            if(yorumFormu) {
                yorumFormu.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const ad = document.getElementById('yorumAd').value;
                    const mesaj = document.getElementById('yorumMesaj').value;
                    const puan = puanInput.value;

                    if (!puan) {
                        alert('Lütfen puan verin.');
                        return;
                    }

                    try {
                        const response = await fetch('/api/yorumlar', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ ad, mesaj, puan: parseInt(puan) })
                        });

                        const data = await response.json();
                        formSonuc.style.color = response.ok ? 'green' : 'red';
                        formSonuc.textContent = data.message;
                        if(response.ok) {
                            yorumFormu.reset();
                            puanlamaYildizlari.forEach(y => y.classList.remove("dolu"));
                        }
                    } catch (error) {
                        formSonuc.style.color = 'red';
                        formSonuc.textContent = 'Bir hata oluştu.';
                    }
                });
            }

            const dinamikYorumAlani = document.getElementById('dinamik-yorum-alani');
            const yorumMetni = document.getElementById('yorum-metni');
            const yorumSahibi = document.getElementById('yorum-sahibi');
            const puanOzeti = document.querySelector('.puanlama-ozeti .puan');
            const yildizlarDolu = document.querySelector('.yildizlar-dolu');
            const yorumSayac = document.getElementById('yorum-sayac');
            let onaylanmisYorumlar = [];
            let mevcutYorumIndex = 0;

            async function fetchApprovedComments() {
                try {
                    const response = await fetch('/api/yorumlar');
                    const data = await response.json();
                    onaylanmisYorumlar = data.yorumlar || [];
                    if (onaylanmisYorumlar.length > 0) {
                        updateCommentStats();
                        showNextComment();
                        setInterval(showNextComment, 6000);
                    }
                } catch (error) {
                    console.error('Yorumlar alınamadı:', error);
                }
            }
            
            function showNextComment() {
                if (onaylanmisYorumlar.length === 0) return;
                const yorum = onaylanmisYorumlar[mevcutYorumIndex];
                dinamikYorumAlani.classList.add('gizli');
                setTimeout(() => {
                    yorumMetni.textContent = `"${yorum.mesaj}"`;
                    yorumSahibi.textContent = `- ${yorum.ad}`;
                    dinamikYorumAlani.classList.remove('gizli');
                }, 400);
                mevcutYorumIndex = (mevcutYorumIndex + 1) % onaylanmisYorumlar.length;
            }

            function updateCommentStats() {
                const toplamPuan = onaylanmisYorumlar.reduce((acc, curr) => acc + curr.puan, 0);
                const ortalamaPuan = (toplamPuan / onaylanmisYorumlar.length).toFixed(1);
                puanOzeti.textContent = ortalamaPuan;
                yildizlarDolu.style.width = `${(ortalamaPuan / 5) * 100}%`;
                yorumSayac.textContent = `(${onaylanmisYorumlar.length} Yorum)`;
            }
            fetchApprovedComments();
            
            const socket = io();
            const yardimciButon = document.getElementById('yardimci-buton');
            const yardimciEkrani = document.getElementById('yardimci-ekrani');
            const yardimciKapat = document.getElementById('yardimci-kapat');
            const destekFormu = document.getElementById('canli-destek-formu');
            const mesajInput = destekFormu.querySelector('textarea');
            const mesajlarAlani = document.getElementById('mesajlar');
            let userId = null;

            function getOrCreateUserId() {
                let id = localStorage.getItem('trend-giyim-user-id');
                if (!id) {
                    id = Date.now().toString(36) + Math.random().toString(36).substring(2);
                    localStorage.setItem('trend-giyim-user-id', id);
                }
                return id;
            }
            userId = getOrCreateUserId();

            yardimciButon.addEventListener('click', () => yardimciEkrani.classList.toggle('gizli'));
            yardimciKapat.addEventListener('click', () => yardimciEkrani.classList.add('gizli'));
            
            socket.on('connect', () => {
                socket.emit('user session connect', { userId });
            });
            
            function addMessage(content, type) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('mesaj', type);
                messageDiv.textContent = content;
                mesajlarAlani.appendChild(messageDiv);
                mesajlarAlani.scrollTop = mesajlarAlani.scrollHeight;
            }
            
            socket.on('chat history', (history) => {
                mesajlarAlani.innerHTML = '<div class="mesaj gelen">Merhaba! Size nasıl yardımcı olabiliriz?</div>';
                history.forEach(msg => addMessage(msg.text, msg.from === 'user' ? 'giden' : 'gelen'));
                destekFormu.classList.remove('disabled');
            });
            
            destekFormu.addEventListener('submit', (e) => {
                e.preventDefault();
                if (destekFormu.classList.contains('disabled')) {
                    socket.emit('user session connect', { userId });
                }
                const mesaj = mesajInput.value.trim();
                if (mesaj) {
                    addMessage(mesaj, 'giden');
                    socket.emit('chat message from user', { userId, message: mesaj });
                    mesajInput.value = '';
                }
            });

            socket.on('operator reply', (message) => {
                addMessage(message, 'gelen');
            });

            socket.on('chat ended by operator', () => {
                mesajlarAlani.innerHTML = '<div class="chat-ended-message">Destek temsilcisi görüşmeyi sonlandırdı. Yeni bir mesaj yazarak tekrar sohbet başlatabilirsiniz.</div>';
                destekFormu.classList.remove('disabled');
            });

            socket.on('chat history locked', () => {
                mesajlarAlani.innerHTML = '<div class="chat-ended-message">Daha önceki görüşmeniz bir operatör tarafından sonlandırıldı. Yeni bir mesaj yazarak tekrar sohbet başlatabilirsiniz.</div>';
                destekFormu.classList.remove('disabled');
            });

            const menuToggle = document.getElementById('menu-toggle');
            const mainNav = document.getElementById('main-nav');
            const navLinks = mainNav.querySelectorAll('a');

            menuToggle.addEventListener('click', () => {
                mainNav.classList.toggle('active');
            });

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mainNav.classList.remove('active');
                });
            });
        });
    </script>
</body>
</html>